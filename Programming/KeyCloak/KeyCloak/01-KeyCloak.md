# KeyCloak

KeyCloak - инструмент авторизации

# База OAuth2

OAuth2(OpenAuthorization2) - это фреймворк/индустриальный-стандарт работающий с аторизацией для всех типов приложений(веб/десктоп/modile/...)

Этап авторизации делиться на три:

-   Identification - кем себя представляет пользователь
-   Authentication - проверка того, что пользователь является тем, кем представляется
-   Authotization - проверка того какие роли и доступы доступны пользователю

# SessionID

Классический SessionID, когда уникальная строчка храниться в куках пользователя и на сервере и сравнивается имеет недостатки:

-   может быть украдена
-   все время надо лазить в базу
-   другие сервисы будут вынуждены вас опять авторизировать
-   некоторые мобильные браузеры и машины(пользователь другой сервер) не хранят cookie вообще

Ouath2

-   предполагает отдельный сервис авторизации
-   токены добавляются в запрос
-   токены работают вне зависимости от домена и типа приложения

# ClientApplication и UserAgent

ClientApplication - это само приложения(фронтенд), которое может формироваться в разных местах:

-   В браузере
-   На сервере
-   На компьютере пользователя

UserAgent - то кто с этим приложением работает(например какой браузер)

# AccessToken

AccessToken - токен со сроком жизни

# GrantType

GrantType(GT)/flow - способ получения AcessToken. В терминах OAuth2 это цепочка процессов аутентификации/авторизации пользователя

Их можно глянуть в доке OAuth2, сейчас не Legacy являются:

-   Authoriaztion Code
-   PKCE
-   Client Credentials
-   Device Token

Настройки в зависимости от выбранного flow:

| Flow | ClientApplication | Нужен Credential -> Secret? | Settings -> AcessType |
| :--- | :---------------- | :-------------------------- | :-------------------- |
|      |                   |                             |                       |

# KeyCloak

## Realm(Realm Settings)

Realm - типа рабочая область. По умолчанию root. Вверху-слева подписано в каком Realm находишся, например Master

## Client(Clients)

Наши приложения, с которыми работает KeyCloak. То бишь наш бэкенд
