# НФ (нормальная форма)

## 1НФ

Таблица в 1НФ если:
- все атрибуты являются простыми(в одной ячейке одно значение)
- отсутствуют дублирующие строки

Например. Таблица не в 1НФ:

| Фирма  | Модели      |
|:-------|:------------|
| BWM    | M5, X5M, M1 |
| Nissan | GT-R        |

Например. Таблица в 1НФ:

| Фирма  | Модели |
|:-------|:-------|
| BWM    | M5     |
| BWM    | X5M    |
| BWM    | M1     |
| Nissan | GT-R   |

## 2НФ

Таблица в 2НФ если:
- таблица в 1НФ
- каждый не ключевой атрибут неприводимо зависит от ПК(первичного ключа)

Например. Таблица не в 2НФ, поскольку <Скида> зависит от ключевого аттрибута <Фирма>:

| Фирма  | Модели | Цена      | Скидки |
|:-------|:-------|:----------|:-------|
| BMW    | M5     | 5.500.000 | 5%     |
| BMW    | X5M    | 6.000.000 | 5%     |
| BMW    | M1     | 2.500.000 | 5%     |
| Nissan | GT-R   | 5.000.000 | 10%    |

Например, эти две таблицы в 2НФ:

| Фирма  | Скидка |
|:-------|:-------|
| BMW    | 5%     |
| Nissan | 10%    |

| Фирма  | Модели | Цена      |
|:-------|:-------|:----------|
| BMW    | M5     | 5.500.000 |
| BMW    | X5M    | 6.000.000 |
| BMW    | M1     | 2.500.000 |
| Nissan | GT-R   | 5.000.000 |

## 3НФ

Таблица в 3НФ если:
- таблица в 2НФ
- каждый  атрибут зависит только от ПК(первичного ключа)

Например. Таблица не в 3НФ, поскольку <Описание класса> зависит от неключевого аттрибута <Класс>:

| Фирма  | Модели | Цена      | Класс  | Описание класса    |
|:-------|:-------|:----------|:-------|:-------------------|
| BMW    | M5     | 5.500.000 | Спорт  | Спортивные машины  |
| BMW    | X5M    | 6.000.000 | Бизнес | Машины для бизнеса |
| BMW    | M1     | 2.500.000 | Бизнес | Машины для бизнеса |
| Nissan | GT-R   | 5.000.000 | Спорт  | Спортивные машины  |

Например, эти две таблицы в 2НФ:

| Класс  | Описание класса    |
|:-------|:-------------------|
| Спорт  | Спортивные машины  |
| Бизнес | Машины для бизнеса |

| Фирма  | Модели | Цена      | Класс  |
|:-------|:-------|:----------|:-------|
| BMW    | M5     | 5.500.000 | Спорт  |
| BMW    | X5M    | 6.000.000 | Бизнес |
| BMW    | M1     | 2.500.000 | Бизнес |
| Nissan | GT-R   | 5.000.000 | Спорт  |

## НФБК

Нормальной Форме Бойса-Кодда - частный случай 3НФ. Таблица, в НФБК, если:
- в 3НФ
- первичный ключ - составной
- первичный ключ не зависит от неключевых атрибутов

Например. У нас есть проекты и направления в этих проектах. У каждого направления в проекте свой куратор. Поэтому <Проект> и <Направление> вместе составляют первичный ключ

Таблица не в НФБК, поскольку первичный ключ зависит от неключевого аттрибута <Куратор>, т.к. зная куратора мы можем определить направлениие:

| Проект | Направленеи | Куратор |
|:-------|:------------|:--------|
| 1      | Разработка  |    A    |
| 1      | Бухгалтерия |    B    |
| 2      | Разработка  |    A    |
| 2      | Бухгалтерия |    C    |
| 3      | Реализация  |    D    |
| 3      | Разработка  |    E    |

Таблица в НФБК:

| ID Куратора | Направленеи | Куратор |
|:------------|:------------|:--------|
| 1           | Разработка  |    A    |
| 2           | Бухгалтерия |    B    |
| 3           | Бухгалтерия |    C    |
| 4           | Реализация  |    D    |
| 5           | Разработка  |    E    |

| Проект | ID Куратора |
|:-------|:------------|
| 1      |      1      |
| 1      |      2      |
| 2      |      1      |
| 2      |      3      |
| 3      |      4      |
| 3      |      5      |

## 4НФ

Таблица в 4НФ если:
- таблица в НФБК
- должно быть как минимум 3 столбца 
- должна отсутствовать многозначная зависимость 

Допустим, существует такая ситуация. В институте читают определенные курсы лекций. Разные курсы лекций читают в разном наборе кабинетов. Преподователям читающим курс все равно в каком из кабинетов это делать

Таблица не в 4НФ, из-за этого с ее редактированием будут проблемы, например если преподаватель A уволится:

| Курс        | Преподаватель | Кабинет   |
|:------------|:--------------|:----------|
| SQL         |       A       |    101    |
| SQL         |       A       |    203    |
| SQL         |       B       |    305    |
| SQL         |       B       |    407    |
| Python      |       C       |    502    |
| Python      |       C       |    305    |

Таблица в 4НФ:

| Курс        | Кабинет   |
|:------------|:----------|
| SQL         |    101    |
| SQL         |    203    |
| SQL         |    305    |
| SQL         |    407    |
| Python      |    502    |
| Python      |    305    |

| Курс        | Преподаватель |
|:------------|:--------------|
| SQL         |       A       |
| SQL         |       B       |
| Python      |       C       |

